generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Bus {
  id       Int    @id @default(autoincrement())
  number   String @db.VarChar(100)   // e.g., "Bus 11"
  route    String @db.VarChar(255)
  location String @db.VarChar(255)   // "lat,lng" string
  comment  String @default("") @db.VarChar(500)  // Admin announcement text
  stops    Stop[]
  drivers  Driver[]
}

model Stop {
  id     Int    @id @default(autoincrement())
  name   String @db.VarChar(150)
  lat    Float  @db.Double
  lng    Float  @db.Double
  busId  Int
  bus    Bus    @relation(fields: [busId], references: [id], onDelete: Cascade)

  @@index([busId])
}

model Driver {
  id       Int    @id @default(autoincrement())
  phone    String @unique @db.VarChar(20)
  isActive Boolean @default(true)
  busId    Int
  bus      Bus    @relation(fields: [busId], references: [id], onDelete: Cascade)

  @@index([busId])
}